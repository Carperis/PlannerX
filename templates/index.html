{% extends 'base.html' %}

{% block head %}

{% endblock %}

{% block body %}

<div class="flex justify-between py-2 px-40 bg-blue-500 text-white">
    <h1 class="text-white text-2xl mainfont-bold my-auto">BU PlannerX</h1>
    <button class="bg-white text-blue-500 px-8 py-2 rounded-lg mainfont-bold">Login</button>
</div>

<div class="container-fluid bg-gray-900">
    <div class="row" style="display: flex; align-items: center; justify-content: center; width: 100%">
        <div class="col-md-12" style="padding-left: 40px; padding-right: 40px">
            {% if msg != [] %}
            <div class="alert alert-success alert-dismissable">

                <button type="button" class="close" data-dismiss="alert" aria-hidden="true">
                    <i class="fa-solid fa-circle-xmark fa-xs"></i>
                </button>
                {% for message in msg%}
                <div class="alert mainfont-bold" style="margin-bottom: 0; padding-top: 0; padding-bottom: 0; ">{{
                    message }}</div>
                {% endfor %}
            </div>
            {% endif %}
        </div>
        <div class="row" style="margin-bottom: 20px;">
            {% for user in users%}
            {% if (user.planNum != -1) %}
            <div class="col-md-2" style="display: flex; align-items: center; justify-content: center;">
                <button onclick="window.location.href='/showprevious/{{
                        user.id }}';">
                    <i class="fa-solid fa-angle-left fa-inverse fa-2xl"></i>
                </button>
            </div>
            <div class="col-md-8 mainfont-bold text-white" style="margin-top: 20px;">
                <form role="form" action="/goto" method="POST"
                    style="display: flex; align-items: center; justify-content: center;">
                    <div style="display: flex; align-items: center; justify-content: center;">
                        <p style="margin: 10px">Plan</p>
                        <input type="number" name="num" id="num" value="{{user.planNum+1}}"
                            class="mainfont-regular rounded-lg form-control bg-gray-800 text-gray-300 w-16">
                        <button type="submit" style="margin: 0;">
                            <i class="fa-solid fa-angles-right fa-inverse fa-xl" style="margin: 10px"></i>
                        </button>
                    </div>
                </form>
                <br>
                <img src="./static/schedule.png" id="img" style="width: 100%; height: 600;" />
            </div>
            <div class="col-md-2" style="display: flex; align-items: center; justify-content: center;">
                <div class="col-md-2" style="display: flex; align-items: center; justify-content: center;">
                    <button onclick="window.location.href='/shownext/{{
                            user.id }}';">
                        <i class="fa-solid fa-angle-right fa-inverse fa-2xl"></i>
                    </button>
                </div>
            </div>
            {% endif %}
            {% endfor %}
        </div>
        <div class="row mainfont-bold text-white" style="width: 100%; padding-left: 60px">
            <div class="col-md-8">
                <form role="form" action="/" method="POST">
                    <div class="form-group">
                        <i class="fa-solid fa-user fa-inverse"></i>
                        <label for="username">
                            Username
                        </label>
                        <input type="text" name="username" id="username" placeholder="Name"
                            value="{% if (not (request.form['username'])) %}{% for user in users %}{{ user.username }}{% endfor %}{% else %}{{request.form['username']}}{% endif %}"
                            class="mainfont-regular rounded-lg form-control bg-gray-800 text-gray-300">
                    </div>

                    <div class="form-group">
                        <i class="fa-solid fa-calendar-days fa-inverse"></i>
                        <label for="content">
                            Semester
                        </label>
                        <div style="display: flex;">
                            <select class="bg-gray-800 text-white w-full p-2 rounded-lg mainfont-regular" name="years"
                                id="">
                                <option value="2022">2022</option>
                                <option value="2023">2023</option>
                                <option value="2024">2024</option>
                                <option value="2025">2025</option>
                            </select>
                            <select class="bg-gray-800 text-white w-full p-2 rounded-lg mainfont-regular" name="term"
                                id="">
                                <option value="SPRG" {% if (not (request.form['term'])) %}{% for user in users %}{% if
                                    (user.semester.split("-")[1]=="SPRG" ) %}selected="selected" {% endif %}{% endfor
                                    %}{% else %}{% if ( request.form['term']=="SPRG" ) %}selected="selected" {% endif
                                    %}{% endif %}>Spring
                                </option>
                                <option value="FALL" {% if (not (request.form['term'])) %}{% for user in users %}{% if
                                    (user.semester.split("-")[1]=="FALL" ) %}selected="selected" {% endif %}{% endfor
                                    %}{% else %}{% if ( request.form['term']=="FALL" ) %}selected="selected" {% endif
                                    %}{% endif %}>Fall
                                </option>
                                <option value="SUMM_1" {% if (not (request.form['term'])) %}{% for user in users %}{% if
                                    (user.semester.split("-")[1]=="SUMM_1" ) %}selected="selected" {% endif %}{% endfor
                                    %}{% else %}{% if ( request.form['term']=="SUMM_1" ) %}selected="selected" {% endif
                                    %}{% endif %}>Summer 1
                                </option>
                                <option value="SUMM_2" {% if (not (request.form['term'])) %}{% for user in users %}{% if
                                    (user.semester.split("-")[1]=="SUMM_2" ) %}selected="selected" {% endif %}{% endfor
                                    %}{% else %}{% if ( request.form['term']=="SUMM_2" ) %}selected="selected" {% endif
                                    %}{% endif %}>Summer 2</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <i class="fa-solid fa-book-open-reader fa-inverse"></i>
                        <label for="content">
                            Classes
                        </label>
                        <input type="text" name="courses" id="courses" placeholder="Classes"
                            value="{% if (not (request.form['courses'])) %}{% for user in users %}{{ user.courses }}{% endfor %}{% else %}{{request.form['courses']}}{% endif %}"
                            class="mainfont-regular rounded-lg form-control bg-gray-800 text-gray-300">
                    </div>


                    <div class="form-group">
                        <i class="fa-solid fa-chalkboard-user fa-inverse"></i>
                        <label for="content">
                            Average RMP Score
                        </label>
                        <input type="number" step="0.01" name="AvgScore" id="AvgScore"
                            placeholder="Expected Average Score"
                            value="{% if (not (request.form['AvgScore'])) %}{% for user in users %}{{ user.AvgScore }}{% endfor %}{% else %}{{request.form['AvgScore']}}{% endif %}"
                            class="mainfont-regular rounded-lg form-control bg-gray-800 text-gray-300">
                    </div>

                    <div class="form-group">
                        <i class="fa-solid fa-person-running fa-inverse fa-lg"></i>
                        <label for="content">
                            Prefer Starting Time
                        </label>
                        <input type="time" name="EarlyTime" id="EarlyTime" placeholder="Expected starting time"
                            value="{% if (not (request.form['EarlyTime'])) %}{% for user in users %}{{ user.EarlyTime }}{% endfor %}{% else %}{{request.form['EarlyTime']}}{% endif %}"
                            class="mainfont-regular rounded-lg form-control bg-gray-800 text-gray-300">
                    </div>


                    <div class="form-group">
                        <i class="fa-solid fa-person-running fa-inverse fa-flip-horizontal fa-lg"></i>
                        <label for="content">
                            Prefer Ending Time
                        </label>
                        <input type="time" name="LateTime" id="LateTime" placeholder="Expected finishing time"
                            value="{% if (not (request.form['LateTime'])) %}{% for user in users %}{{ user.LateTime }}{% endfor %}{% else %}{{request.form['LateTime']}}{% endif %}"
                            class="mainfont-regular rounded-lg form-control bg-gray-800 text-gray-300">
                    </div>
                    <button id="btn" type="submit"
                        class="ml-auto mt-2 bg-blue-500 py-2 px-6 text-white mainfont-bold text-base rounded-lg">
                        Submit / Update
                    </button>
                </form>
            </div>
            <div class="col-md-4">
                <br>
                {% if(users) %}
                {% for user in users %}
                <h3>Hi {{ user.username }}:</h3><br>
                <div class="mainfont-regular">
                    Your {{ user.semester }} classes:
                    <ol>
                        {% for cls in user.courses.split(",") %}
                        <li class="list-item">
                            {{cls}}
                        </li>
                        {% endfor %}
                    </ol><br>
                    Your prefer avergae score: {{ user.AvgScore }}<br>
                    Your prefer starting time: {{ user.EarlyTime }}<br>
                    Your prefer finishing time: {{ user.LateTime }}<br>
                </div>
                <br>
                <button class="ml-auto mt-2 bg-blue-500 py-2 px-6 text-white mainfont-bold text-base rounded-lg"
                    onclick="window.location.href='/getplans/{{
                            user.id }}';" id="btn">
                    Get Plans
                </button><br>
                <button class="ml-auto mt-2 bg-blue-500 py-2 px-6 text-white mainfont-bold text-base rounded-lg"
                    onclick="window.location.href='/rankplans/{{
                        user.id }}';" id="btn">
                    Rank Plans
                </button><br>
                <button class="ml-auto mt-2 bg-blue-500 py-2 px-6 text-white mainfont-bold text-base rounded-lg"
                    onclick="window.location.href='/shownext/{{
                        user.id }}';" id="btn">
                    Show Plans
                </button><br>
                <button class="ml-auto mt-2 bg-blue-500 py-2 px-6 text-white mainfont-bold text-base rounded-lg"
                    onclick="window.location.href='/delete/{{
                        user.id }}';" id="btn">
                    Delete Record
                </button>
                {% endfor %}
                {% else %}
                <h3>Hi Welcome to BU PlannerX</h3>
                <br>
                <ol>
                    <li class="list-item">
                        Step 1
                    </li>
                    <li class="list-item">
                        Step 2
                    </li>
                    <li class="list-item">
                        Step 3
                    </li>
                </ol><br>
                {% endif %}

            </div>
        </div>
    </div>
</div>
{% endblock %}